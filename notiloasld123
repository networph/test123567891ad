local Flux = {RainbowColorValue = 0, HueSelectionPosition = 0}
local PresetColor = Color3.fromRGB(66, 134, 255)
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local LocalPlayer = game:GetService("Players").LocalPlayer
local Mouse = LocalPlayer:GetMouse()
local CloseBind = Enum.KeyCode.RightControl

local FluxLib = Instance.new("ScreenGui")
FluxLib.Name = "FluxLib"
FluxLib.Parent = game.CoreGui
FluxLib.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

coroutine.wrap(
	function()
		while wait() do
			Flux.RainbowColorValue = Flux.RainbowColorValue + 1 / 255
			Flux.HueSelectionPosition = Flux.HueSelectionPosition + 1

			if Flux.RainbowColorValue >= 1 then
				Flux.RainbowColorValue = 0
			end

			if Flux.HueSelectionPosition == 80 then
				Flux.HueSelectionPosition = 0
			end
		end
	end
)()

local function MakeDraggable(topbarobject, object)
	local Dragging = nil
	local DragInput = nil
	local DragStart = nil
	local StartPosition = nil

	local function Update(input)
		local Delta = input.Position - DragStart
		local pos =
			UDim2.new(
				StartPosition.X.Scale,
				StartPosition.X.Offset + Delta.X,
				StartPosition.Y.Scale,
				StartPosition.Y.Offset + Delta.Y
			)
		object.Position = pos
	end

	topbarobject.InputBegan:Connect(
		function(input)
			if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
				Dragging = true
				DragStart = input.Position
				StartPosition = object.Position

				input.Changed:Connect(
					function()
						if input.UserInputState == Enum.UserInputState.End then
							Dragging = false
						end
					end
				)
			end
		end
	)

	topbarobject.InputChanged:Connect(
		function(input)
			if
				input.UserInputType == Enum.UserInputType.MouseMovement or
					input.UserInputType == Enum.UserInputType.Touch
			then
				DragInput = input
			end
		end
	)

	UserInputService.InputChanged:Connect(
		function(input)
			if input == DragInput and Dragging then
				Update(input)
			end
		end
	)
end



function Flux:Window(text, bottom,mainclr,toclose)
	CloseBind = toclose or Enum.KeyCode.RightControl
	PresetColor = mainclr or Color3.fromRGB(66, 134, 255)
	local fs = false
	local MainFrame = Instance.new("Frame")
	local MainCorner = Instance.new("UICorner")
	local LeftFrame = Instance.new("Frame")
	local LeftCorner = Instance.new("UICorner")
	local GlowTabHolder = Instance.new("ImageLabel")
	local Title = Instance.new("TextLabel")
	local BottomText = Instance.new("TextLabel")
	local TabHold = Instance.new("Frame")
	local TabLayout = Instance.new("UIListLayout")
	local Drag = Instance.new("Frame")
	local ContainerFolder = Instance.new("Folder")

	MainFrame.Name = "MainFrame"
	MainFrame.Parent = FluxLib
	MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
	MainFrame.BackgroundColor3 = Color3.fromRGB(30, 33, 39) -- Darker color
	MainFrame.ClipsDescendants = true
	MainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
	MainFrame.Size = UDim2.new(0, 0, 0, 0)

	MainCorner.CornerRadius = UDim.new(0, 5)
	MainCorner.Name = "MainCorner"
	MainCorner.Parent = MainFrame

	LeftFrame.Name = "LeftFrame"
	LeftFrame.Parent = MainFrame
	LeftFrame.BackgroundColor3 = Color3.fromRGB(27, 29, 34) -- Darker color
	LeftFrame.Size = UDim2.new(0, 205, 0, 484)

	LeftCorner.CornerRadius = UDim.new(0, 5)
	LeftCorner.Name = "LeftCorner"
	LeftCorner.Parent = LeftFrame

	GlowTabHolder.Name = "GlowTabHolder"
	GlowTabHolder.Parent = LeftFrame
	GlowTabHolder.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	GlowTabHolder.BackgroundTransparency = 1.000
	GlowTabHolder.BorderSizePixel = 0
	GlowTabHolder.Position = UDim2.new(0, -15, 0, -15)
	GlowTabHolder.Size = UDim2.new(1, 30, 1, 30)
	GlowTabHolder.ZIndex = 0
	GlowTabHolder.Image = "rbxassetid://4996891970"
	GlowTabHolder.ImageColor3 = Color3.fromRGB(15, 15, 15)
	GlowTabHolder.ScaleType = Enum.ScaleType.Slice
	GlowTabHolder.SliceCenter = Rect.new(20, 20, 280, 280)

	Title.Name = "Title"
	Title.Parent = LeftFrame
	Title.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	Title.BackgroundTransparency = 1.000
	Title.Position = UDim2.new(0.097560972, 0, 0.0475206636, 0)
	Title.Size = UDim2.new(0, 111, 0, 34)
	Title.Font = Enum.Font.GothamBold
	Title.Text = text
	Title.TextColor3 = Color3.fromRGB(255, 255, 255)
	Title.TextSize = 25.000
	Title.TextXAlignment = Enum.TextXAlignment.Left

	BottomText.Name = "BottomText"
	BottomText.Parent = LeftFrame
	BottomText.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	BottomText.BackgroundTransparency = 1.000
	BottomText.Position = UDim2.new(0.097560972, 0, 0.0889999792, 0)
	BottomText.Size = UDim2.new(0, 113, 0, 28)
	BottomText.Font = Enum.Font.Gotham
	BottomText.Text = bottom
	BottomText.TextColor3 = Color3.fromRGB(255, 255, 255)
	BottomText.TextSize = 14.000
	BottomText.TextTransparency = 0.300
	BottomText.TextXAlignment = Enum.TextXAlignment.Left

	TabHold.Name = "TabHold"
	TabHold.Parent = LeftFrame
	TabHold.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	TabHold.BackgroundTransparency = 1.000
	TabHold.Position = UDim2.new(0, 0, 0.167355374, 0)
	TabHold.Size = UDim2.new(0, 205, 0, 403)

	TabLayout.Name = "TabLayout"
	TabLayout.Parent = TabHold
	TabLayout.SortOrder = Enum.SortOrder.LayoutOrder
	TabLayout.Padding = UDim.new(0, 3)

	Drag.Name = "Drag"
	Drag.Parent = MainFrame
	Drag.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	Drag.BackgroundTransparency = 1.000
	Drag.Position = UDim2.new(0.290368259, 0, 0, 0)
	Drag.Size = UDim2.new(0, 501, 0, 23)

	ContainerFolder.Name = "ContainerFolder"
	ContainerFolder.Parent = MainFrame
	
	MakeDraggable(Drag,MainFrame)
	MakeDraggable(LeftFrame,MainFrame)
	MainFrame:TweenSize(UDim2.new(0, 706, 0, 484), Enum.EasingDirection.Out, Enum.EasingStyle.Quart, .6, true)
	
	local uitoggled = false
	UserInputService.InputBegan:Connect(
		function(io, p)
			if io.KeyCode == CloseBind then
				if uitoggled == false then
					MainFrame:TweenSize(UDim2.new(0, 0, 0, 0), Enum.EasingDirection.Out, Enum.EasingStyle.Quart, .6, true)
					uitoggled = true
					wait(.5)
					FluxLib.Enabled = false
				else
					MainFrame:TweenSize(UDim2.new(0, 706, 0, 484), Enum.EasingDirection.Out, Enum.EasingStyle.Quart, .6, true)
					FluxLib.Enabled = true
					uitoggled = false
				end
			end
		end
	)
	
	function Flux:Notification(desc,buttontitle)
		for i, v in next, MainFrame:GetChildren() do
			if v.Name == "NotificationBase" then
				v:Destroy()
			end
		end
		local NotificationBase = Instance.new("TextButton")
		local NotificationBaseCorner = Instance.new("UICorner")
		local NotificationFrame = Instance.new("Frame")
		local NotificationFrameCorner = Instance.new("UICorner")
		local NotificationFrameGlow = Instance.new("ImageLabel")
		local UnderTitle = Instance.new("Frame")
		local UnderTitleCorner = Instance.new("UICorner")
		local UnderTitleFrame = Instance.new("Frame")
		local UnderTitleFrameCorner = Instance.new("UICorner")
		local UnderTitleFrame1 = Instance.new("Frame")
		local Text1 = Instance.new("TextLabel")
		local OkayBtn = Instance.new("TextButton")
		local OkayBtnCorner = Instance.new("UICorner")
		local OkayBtnTitle = Instance.new("TextLabel")
	
		NotificationBase.Name = "NotificationBase"
		NotificationBase.Parent = MainFrame
		NotificationBase.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
		NotificationBase.BackgroundTransparency = 1.000
		NotificationBase.BorderSizePixel = 0
		NotificationBase.ClipsDescendants = true
		NotificationBase.Position = UDim2.new(0, 0, 0, 0)
		NotificationBase.Size = UDim2.new(0, 706, 0, 484)
		NotificationBase.AutoButtonColor = false
		NotificationBase.Font = Enum.Font.SourceSans
		NotificationBase.Text = ""
		NotificationBase.TextColor3 = Color3.fromRGB(0, 0, 0)
		NotificationBase.TextSize = 14.000
	
		NotificationBaseCorner.CornerRadius = UDim.new(0, 5)
		NotificationBaseCorner.Name = "NotificationBaseCorner"
		NotificationBaseCorner.Parent = NotificationBase
	
		NotificationFrame.Name = "NotificationFrame"
		NotificationFrame.Parent = NotificationBase
		NotificationFrame.AnchorPoint = Vector2.new(0.5, 0.5)
		NotificationFrame.BackgroundColor3 = Color3.fromRGB(30, 33, 39) -- Darker color
		NotificationFrame.ClipsDescendants = true
		NotificationFrame.Position = UDim2.new(0.499, 0, 0.493827164, 0)
		NotificationFrame.Size = UDim2.new(0, 0, 0, 0)
	
		NotificationFrameCorner.CornerRadius = UDim.new(0, 5)
		NotificationFrameCorner.Name = "NotificationFrameCorner"
		NotificationFrameCorner.Parent = NotificationFrame
	
		NotificationFrameGlow.Name = "NotificationFrameGlow"
		NotificationFrameGlow.Parent = NotificationFrame
		NotificationFrameGlow.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
		NotificationFrameGlow.BackgroundTransparency = 1.000
		NotificationFrameGlow.BorderSizePixel = 0
		NotificationFrameGlow.Position = UDim2.new(0, -15, 0, -15)
		NotificationFrameGlow.Size = UDim2.new(1, 30, 1, 30)
		NotificationFrameGlow.ZIndex = 0
		NotificationFrameGlow.Image = "rbxassetid://4996891970"
		NotificationFrameGlow.ImageColor3 = Color3.fromRGB(15, 15, 15)
		NotificationFrameGlow.ScaleType = Enum.ScaleType.Slice
		NotificationFrameGlow.SliceCenter = Rect.new(20, 20, 280, 280)
	
		UnderTitle.Name = "UnderTitle"
		UnderTitle.Parent = NotificationFrame
		UnderTitle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
		UnderTitle.BackgroundTransparency = 1.000
		UnderTitle.BorderSizePixel = 0
		UnderTitle.ClipsDescendants = true
		UnderTitle.Position = UDim2.new(0.116788321, 0, 0, 0)
		UnderTitle.Size = UDim2.new(0, 200, 0, 8)
	
		UnderTitleCorner.CornerRadius = UDim.new(0, 5)
		UnderTitleCorner.Name = "UnderTitleCorner"
		UnderTitleCorner.Parent = UnderTitle
	
		UnderTitleFrame.Name = "UnderTitleFrame"
		UnderTitleFrame.Parent = UnderTitle
		UnderTitleFrame.BackgroundColor3 = PresetColor
		UnderTitleFrame.BorderSizePixel = 0
		UnderTitleFrame.Position = UDim2.new(-0.000100000001, 0, 0.5, 0)
		UnderTitleFrame.Size = UDim2.new(0, 200, 0, 8)
	
		UnderTitleFrameCorner.CornerRadius = UDim.new(0, 5)
		UnderTitleFrameCorner.Name = "UnderTitleFrameCorner"
		UnderTitleFrameCorner.Parent = UnderTitleFrame
	
		UnderTitleFrame1.Name = "UnderTitleFrame1"
		UnderTitleFrame1.Parent = UnderTitle
		UnderTitleFrame1.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
		UnderTitleFrame1.BackgroundTransparency = 0.600
		UnderTitleFrame1.BorderSizePixel = 0
		UnderTitleFrame1.Position = UDim2.new(-0.000100000001, 0, 0.5, 0)
		UnderTitleFrame1.Size = UDim2.new(0, 200, 0, 8)
	
		Text1.Name = "Text1"
		Text1.Parent = NotificationFrame
		Text1.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
		Text1.BackgroundTransparency = 1.000
		Text1.Position = UDim2.new(0.116788328, 0, 0.0370370419, 0)
		Text1.Size = UDim2.new(0, 266, 0, 113)
		Text1.Font = Enum.Font.Gotham
		Text1.Text = desc
		Text1.TextColor3 = Color3.fromRGB(255, 255, 255)
		Text1.TextSize = 13.000
		Text1.TextWrapped = true
		Text1.TextXAlignment = Enum.TextXAlignment.Left
		Text1.TextYAlignment = Enum.TextYAlignment.Top
	
		OkayBtn.Name = "OkayBtn"
		OkayBtn.Parent = NotificationFrame
		OkayBtn.AnchorPoint = Vector2.new(0.5, 0.5)
		OkayBtn.BackgroundColor3 = PresetColor
		OkayBtn.Position = UDim2.new(0.501399338, 0, 0.733333349, 0)
		OkayBtn.Size = UDim2.new(0, 220, 0, 32)
		OkayBtn.AutoButtonColor = false
		OkayBtn.Font = Enum.Font.SourceSans
		OkayBtn.Text = ""
		OkayBtn.TextColor3 = Color3.fromRGB(0, 0, 0)
		OkayBtn.TextSize = 14.000
	
		OkayBtnCorner.CornerRadius = UDim.new(0, 4)
		OkayBtnCorner.Name = "OkayBtnCorner"
		OkayBtnCorner.Parent = OkayBtn
	
		OkayBtnTitle.Name = "OkayBtnTitle"
		OkayBtnTitle.Parent = OkayBtn
		OkayBtnTitle.AnchorPoint = Vector2.new(0.5, 0.5)
		OkayBtnTitle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
		OkayBtnTitle.BackgroundTransparency = 1.000
		OkayBtnTitle.Position = UDim2.new(0.5, 0, 0.5, 0)
		OkayBtnTitle.Size = UDim2.new(0, 190, 0, 20)
		OkayBtnTitle.Font = Enum.Font.Gotham
		OkayBtnTitle.Text = buttontitle
		OkayBtnTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
		OkayBtnTitle.TextSize = 13.000
		OkayBtnTitle.TextWrapped = true
	
		NotificationFrame:TweenSize(UDim2.new(0, 385, 0, 203), Enum.EasingDirection.Out, Enum.EasingStyle.Quart, .3, true)
		wait(.4)
		NotificationFrame:TweenSize(UDim2.new(0, 385, 0, 181), Enum.EasingDirection.Out, Enum.EasingStyle.Quart, .3, true)
	
		OkayBtn.MouseButton1Click:Connect(
			function()
				NotificationFrame:TweenSize(UDim2.new(0, 0, 0, 0), Enum.EasingDirection.Out, Enum.EasingStyle.Quart, .3, true)
				wait(.3)
				NotificationBase:Destroy()
			end
		)
	end
	
	
	function Flux:Tab(text)
		local Tab = Instance.new("TextButton")
		local TabUICorner = Instance.new("UICorner")
		local TextLabel = Instance.new("TextLabel")
		local TabBtnIndicator = Instance.new("Frame")
		local TabBtnIndicatorCorner = Instance.new("UICorner")
		local Container = Instance.new("ScrollingFrame")
		local ContainerLayout = Instance.new("UIListLayout")
	
		Tab.Name = "Tab"
		Tab.Parent = TabHold
		Tab.BackgroundColor3 = Color3.fromRGB(22, 24, 28) -- Darker color
		Tab.Position = UDim2.new(0.0370175941, 0, 0, 0)
		Tab.Size = UDim2.new(0, 109, 0, 28)
		Tab.AutoButtonColor = false
		Tab.Font = Enum.Font.SourceSans
		Tab.Text = ""
		Tab.TextColor3 = Color3.fromRGB(0, 0, 0)
		Tab.TextSize = 14.000
	
		TabUICorner.CornerRadius = UDim.new(0, 4)
		TabUICorner.Name = "TabUICorner"
		TabUICorner.Parent = Tab
	
		TextLabel.Parent = Tab
		TextLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
		TextLabel.BackgroundTransparency = 1.000
		TextLabel.Position = UDim2.new(0, 0, 0, 0)
		TextLabel.Size = UDim2.new(0, 109, 0, 28)
		TextLabel.Font = Enum.Font.Gotham
		TextLabel.Text = text
		TextLabel.TextColor3 = Color3.fromRGB(104, 104, 104)
		TextLabel.TextSize = 14.000
		TextLabel.TextWrapped = true
	
		TabBtnIndicator.Name = "TabBtnIndicator"
		TabBtnIndicator.Parent = Tab
		TabBtnIndicator.BackgroundColor3 = PresetColor
		TabBtnIndicator.BorderSizePixel = 0
		TabBtnIndicator.Position = UDim2.new(0, 0, 1, 0)
		TabBtnIndicator.Size = UDim2.new(0, 0, 0, 2)
	
		TabBtnIndicatorCorner.CornerRadius = UDim.new(0, 9)
		TabBtnIndicatorCorner.Name = "TabBtnIndicatorCorner"
		TabBtnIndicatorCorner.Parent = TabBtnIndicator
	
		Container.Name = "Container"
		Container.Parent = ContainerFolder
		Container.Active = true
		Container.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
		Container.BackgroundTransparency = 1.000
		Container.BorderSizePixel = 0
		Container.Position = UDim2.new(0.319948882, 0, 0.0247524753, 0)
		Container.Size = UDim2.new(0, 548, 0, 307)
		Container.CanvasSize = UDim2.new(0, 0, 0, 0)
		Container.ScrollBarThickness = 3
	
		ContainerLayout.Name = "ContainerLayout"
		ContainerLayout.Parent = Container
		ContainerLayout.SortOrder = Enum.SortOrder.LayoutOrder
		ContainerLayout.Padding = UDim.new(0, 6)
	
		Tab.MouseButton1Click:Connect(
			function()
				for i, v in next, TabHold:GetChildren() do
					if v:IsA("TextButton") then
						TweenService:Create(
							v.TabBtnIndicator,
							TweenInfo.new(.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
							{Size = UDim2.new(0, 0, 0, 2)}
						):Play()
						TweenService:Create(
							v.TextLabel,
							TweenInfo.new(.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
							{TextColor3 = Color3.fromRGB(104, 104, 104)}
						):Play()
					end
					Container.Visible = false
				end
	
				for i, v in next, ContainerFolder:GetChildren() do
					v.Visible = false
				end
	
				Container.Visible = true
				TweenService:Create(
					TextLabel,
					TweenInfo.new(.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
					{TextColor3 = Color3.fromRGB(255, 255, 255)}
				):Play()
				TweenService:Create(
					TabBtnIndicator,
					TweenInfo.new(.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
					{Size = UDim2.new(0, 109, 0, 2)}
				):Play()
			end
		)
	
		local TabContent = {}
	
		function TabContent:Button(text, callback)
			local Button = Instance.new("TextButton")
			local ButtonCorner = Instance.new("UICorner")
			local ButtonTitle = Instance.new("TextLabel")
	
			Button.Name = "Button"
			Button.Parent = Container
			Button.BackgroundColor3 = Color3.fromRGB(34, 38, 45) -- Darker color
			Button.Size = UDim2.new(0, 528, 0, 36)
			Button.AutoButtonColor = false
			Button.Font = Enum.Font.SourceSans
			Button.Text = ""
			Button.TextColor3 = Color3.fromRGB(0, 0, 0)
			Button.TextSize = 14.000
	
			ButtonCorner.CornerRadius = UDim.new(0, 4)
			ButtonCorner.Name = "ButtonCorner"
			ButtonCorner.Parent = Button
	
			ButtonTitle.Name = "ButtonTitle"
			ButtonTitle.Parent = Button
			ButtonTitle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
			ButtonTitle.BackgroundTransparency = 1.000
			ButtonTitle.Position = UDim2.new(0, 12, 0, 0)
			ButtonTitle.Size = UDim2.new(0, 187, 0, 36)
			ButtonTitle.Font = Enum.Font.Gotham
			ButtonTitle.Text = text
			ButtonTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
			ButtonTitle.TextSize = 14.000
			ButtonTitle.TextXAlignment = Enum.TextXAlignment.Left
	
			Button.MouseButton1Click:Connect(
				function()
					pcall(callback)
				end
			)
		end
	
		return TabContent
	end
	
	return Flux
end

return library

